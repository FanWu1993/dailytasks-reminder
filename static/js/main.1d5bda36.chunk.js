(this["webpackJsonpdailytasks-reminder"]=this["webpackJsonpdailytasks-reminder"]||[]).push([[0],{29:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(13),c=a.n(i),s=a(9),l=a(14),r=a(15),o=a(18),d=a(17),u=a(10),j=(a(25),a(4)),b=(a(29),a(1)),f=function(e){var t="card "+e.className;return Object(b.jsx)("div",{className:t,children:e.children})},h=(a(31),a(16)),O=(a(32),a(33),function(e){var t="0%";e.maxValue>0&&(t=Math.round(e.value/e.maxValue*100)+"%");return Object(b.jsxs)("div",{className:"chart-bar",children:[Object(b.jsx)("div",{className:"chart-bar__inner",onClick:function(){e.onChangeFilter(e.label)},children:Object(b.jsx)("div",{className:"chart-bar__fill",style:{height:t}})}),Object(b.jsx)("div",{className:"chart-bar__label",children:e.label})]})}),y=function(e){return Object(b.jsx)("div",{className:"chart",children:e.dataPoints.map((function(t){return Object(b.jsx)(O,{value:t.done,maxValue:t.value,label:t.label,onChangeFilter:e.onChangeFilter},t.label)}))})},v=function(e){var t,a=[],n=Object(h.a)(e.dailyTasks);try{var i=function(){var e=t.value,n=e.location,i=a.find((function(e){return e.label===n}));void 0===i?e.done?a.push({label:n,value:1,done:1}):a.push({label:n,value:1,done:0}):e.done?(a[a.indexOf(i)].value+=1,a[a.indexOf(i)].done+=1):a[a.indexOf(i)].value+=1};for(n.s();!(t=n.n()).done;)i()}catch(c){n.e(c)}finally{n.f()}return Object(b.jsx)(y,{dataPoints:a,onChangeFilter:e.onChangeFilter})},x=(a(34),function(e){var t=function(t){e.onChangeFilter(t.target)},a=["\u6240\u6709\u5730\u56fe"].concat(Object(s.a)(e.locations));return Object(b.jsx)("div",{className:"daily-filter",children:Object(b.jsxs)("div",{className:"daily-filter__control",children:[Object(b.jsx)("label",{children:"Filters"}),Object(b.jsx)("select",{value:e.selected.location,onChange:t,children:a.map((function(e){return Object(b.jsx)("option",{value:e,children:e},Math.random().toString())}))}),Object(b.jsx)("select",{value:e.selected.progress,onChange:t,children:["\u6240\u6709\u72b6\u6001","\u672a\u5b8c\u6210","\u5b8c\u6210"].map((function(e){return Object(b.jsx)("option",{value:e,children:e},Math.random().toString())}))})]})})}),m=(a(35),a(36),function(e){var t=Object(n.useState)(e.done),a=Object(j.a)(t,2),i=a[0],c=a[1];return Object(b.jsx)("li",{children:Object(b.jsxs)(f,{className:"daily-item",children:[Object(b.jsx)("div",{className:"daily-date",children:e.location}),Object(b.jsxs)("div",{className:"daily-item__description ",children:[Object(b.jsx)("h2",{children:e.task}),Object(b.jsx)("div",{onClick:function(t){i||(c(!i),e.onDoneDaily(t.target.parentNode.firstChild.innerText))},className:"daily-item__price",children:i?"\u5b8c\u6210":"\u672a\u5b8c\u6210"})," ",Object(b.jsx)("div",{onClick:function(t){window.confirm("\u786e\u5b9a\u8981\u5220\u9664\uff1f")&&e.onDeleteDaily(t.target.parentNode.firstChild.innerText)},className:"daily-item__price",children:"\u5220\u9664"})]})]})})}),p=function(e){return 0===e.items.length?Object(b.jsx)("h2",{className:"daily-list__fallback",children:"\u4e48\u5f97\u65e5\u5e38\u5566!"}):Object(b.jsx)("ul",{className:"daily-list",children:e.items.map((function(t){return Object(b.jsx)(m,{location:t.location,task:t.task,done:t.done,onDeleteDaily:e.onDeleteDaily,onDoneDaily:e.onDoneDaily},t.id)}))})},k=function(e){var t=Object(n.useState)("\u6240\u6709\u5730\u56fe"),a=Object(j.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)("\u6240\u6709\u72b6\u6001"),r=Object(j.a)(l,2),o=r[0],d=r[1],u={location:i,progress:o},h=function(e){void 0!==e.firstChild?"\u6240\u6709\u72b6\u6001"===e.firstChild.value?d(e.value):c(e.value):c(e)},O=Object(s.a)(new Set(e.dailyTasks.map((function(e){return e.location})))),y="\u6240\u6709\u5730\u56fe"===i?e.dailyTasks:e.dailyTasks.filter((function(e){return e.location===i}));return y="\u6240\u6709\u72b6\u6001"===o?y:y.filter((function(e){return e.done===("\u5b8c\u6210"===o)})),Object(b.jsx)("div",{children:Object(b.jsxs)(f,{className:"daily",children:[Object(b.jsx)(x,{locations:O,selected:u,onChangeFilter:h}),Object(b.jsx)(v,{dailyTasks:e.dailyTasks,onChangeFilter:h}),Object(b.jsx)(p,{items:y,onDeleteDaily:e.onDeleteDaily,onDoneDaily:e.onDoneDaily})]})})},D=a(19),g=(a(37),function(e){var t=Object(n.useState)(""),a=Object(j.a)(t,2),i=a[0],c=a[1],s=Object(n.useState)(""),l=Object(j.a)(s,2),r=l[0],o=l[1],d=Object(n.useState)("\u65e5\u5e38"),u=Object(j.a)(d,2),f=u[0],h=u[1];return Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a={location:i,task:r,type:f,done:!1};e.onSaveDailyData(a),c(""),o("")},children:[Object(b.jsxs)("div",{className:"new-daily__controls",children:[Object(b.jsxs)("div",{className:"new-daily__control",children:[Object(b.jsx)("label",{children:"\u5730\u56fe"}),Object(b.jsx)("input",{type:"text",value:i,onChange:function(e){c(e.target.value)}})]}),Object(b.jsxs)("div",{className:"new-daily__control",children:[Object(b.jsx)("label",{children:"\u4efb\u52a1"}),Object(b.jsx)("input",{type:"text",value:r,onChange:function(e){o(e.target.value)}})]})," ",Object(b.jsx)("div",{className:"new-daily__control",children:Object(b.jsx)("select",{value:f,onChange:function(e){h(e.target.value)},children:["\u65e5\u5e38","\u5468\u5e38"].map((function(e){return Object(b.jsx)("option",{value:e,children:e},Math.random().toString())}))})})]}),Object(b.jsxs)("div",{className:"new-daily__actions",children:[Object(b.jsx)("button",{type:"button",onClick:e.onCancel,children:"\u53d6\u6d88"}),Object(b.jsx)("button",{type:"submit",children:"\u6dfb\u52a0\u65e5\u5e38"})]})]})}),N=(a(38),function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),i=a[0],c=a[1];return Object(b.jsxs)("div",{className:"new-daily",children:[!i&&Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(){c(!0)},children:"\u6dfb\u52a0\u65b0\u65e5\u5e38"}),Object(b.jsx)("button",{onClick:function(){e.onStartNewDay()},children:"\u5f00\u542f\u65b0\u4e00\u5929"}),Object(b.jsx)("button",{onClick:function(){e.onStartNewWeek()},children:"\u5f00\u542f\u65b0\u4e00\u5468"})]}),i&&Object(b.jsx)(g,{onCancel:function(){c(!1)},onSaveDailyData:function(t){var a=Object(D.a)({id:Math.random().toString()},t);e.onAddDaily(a),c(!1)}})]})}),C={apiKey:"AIzaSyBt2EIaFdmrOUwRvDTxB9w65ioBs5xJG64",authDomain:"dailytasks-reminder.firebaseapp.com",databaseURL:"https://dailytasks-reminder-default-rtdb.firebaseio.com",projectId:"dailytasks-reminder",storageBucket:"dailytasks-reminder.appspot.com",messagingSenderId:"190850445875",appId:"1:190850445875:web:5e7cf5f4371edf732f6946"},S=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getUserData=function(){u.a.database().ref("/daily").on("value",(function(e){var t=e.val();n.setState({dailyTasks:t})}))},n.componentDidMount=function(){u.a.apps.length?u.a.app():u.a.initializeApp(C),n.getUserData()},n.writeUserData=function(){u.a.database().ref("/daily").set(n.state.dailyTasks)},n.state={dailyTasks:[]},n}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e,t){t!==this.state&&this.writeUserData()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{children:[Object(b.jsx)(N,{onAddDaily:function(t){e.setState({dailyTasks:[].concat(Object(s.a)(e.state.dailyTasks),[t])})},onStartNewDay:function(){var t=e.state.dailyTasks;t.map((function(e){return"\u65e5\u5e38"===e.type&&(e.done=!1),e})),e.setState({dailyTasks:t})},onStartNewWeek:function(){var t=e.state.dailyTasks;t.map((function(e){return"\u5468\u5e38"===e.type&&(e.done=!1),e})),e.setState({dailyTasks:t})}}),Object(b.jsx)(k,{dailyTasks:this.state.dailyTasks,onDeleteDaily:function(t){var a=e.state.dailyTasks.filter((function(e){return e.task!==t}));e.setState({dailyTasks:a})},onDoneDaily:function(t){var a=e.state.dailyTasks;a[a.findIndex((function(e){return e.task===t}))].done=!0,e.setState({dailyTasks:a})}})]})}}]),a}(n.Component);a(39);c.a.render(Object(b.jsx)(S,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1d5bda36.chunk.js.map